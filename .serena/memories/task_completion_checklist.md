# タスク完了時のチェックリスト

## 実装完了後に必ず実行すべきこと

### 1. テストの実行
```bash
# 単体テストの実行
./gradlew test

# アーキテクチャテストの実行（重要！）
./gradlew archTest

# 全テストの実行
./gradlew ciTest
```

**重要**: アーキテクチャテストが失敗する場合は、クリーンアーキテクチャの原則違反を示しているため、必ず修正すること。

### 2. コード品質チェック
```bash
# カバレッジレポートの確認
./gradlew jacocoTestReport
# レポート場所: build/reports/jacoco/test/html/index.html

# コードメトリクスの確認
./gradlew codeMetricsReport
```

### 3. ビルド確認
```bash
# クリーンビルド
./gradlew clean build
```

### 4. アーキテクチャ制約の確認

以下の制約が守られていることを確認：
- [ ] ドメイン層は他の層に依存していない
- [ ] ドメイン層はフレームワークに依存していない
- [ ] アプリケーション層はドメイン層のみに依存
- [ ] プレゼンテーション層はアプリケーション層のみに依存
- [ ] インフラ層はプレゼンテーション層に依存していない

### 5. 命名規則の確認
- [ ] アプリケーションサービス: `*ApplicationService`
- [ ] ドメインサービス: `*DomainService`
- [ ] リポジトリポート: `*RepositoryPort`
- [ ] リポジトリ実装: `*RepositoryAdapter`
- [ ] コントローラ: `*Controller`

### 6. コミット前チェック
```bash
# ステージング状態の確認
git status

# 変更内容の確認
git diff

# テストが全て通ることを確認
./gradlew test archTest
```

## レイヤー別チェックポイント

### ドメイン層実装時
- [ ] 外部フレームワークへの依存がない
- [ ] ビジネスロジックが適切に実装されている
- [ ] バリューオブジェクトがimmutableである
- [ ] エンティティのライフサイクルが適切に管理されている

### アプリケーション層実装時
- [ ] ユースケースが明確に実装されている
- [ ] トランザクション境界が適切に設定されている
- [ ] ドメイン層のみに依存している
- [ ] ビジネスロジックをドメイン層に委譲している

### インフラストラクチャ層実装時
- [ ] リポジトリポートを正しく実装している
- [ ] ドメインモデルとDBモデルの変換が適切
- [ ] トランザクション処理が正しい

### プレゼンテーション層実装時
- [ ] HTTPリクエスト/レスポンスの処理のみ
- [ ] バリデーションが適切に実装されている
- [ ] アプリケーション層のみに依存している
- [ ] ビジネスロジックが含まれていない

## デプロイ前チェック
- [ ] 全テストがパス
- [ ] アーキテクチャテストがパス
- [ ] カバレッジが基準を満たしている
- [ ] ビルドエラーがない
- [ ] ログレベルが適切に設定されている
